<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="ProcessScaleGenerator.View.Pages.Main.DashboardView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:buttons="clr-namespace:ProcessScaleGenerator.View.Components.Buttons"
    xmlns:elements="clr-namespace:ProcessScaleGenerator.View.Components.Elements"
    xmlns:icon="clr-namespace:ProcessScaleGenerator.Shared.Constants.Fonts;assembly=ProcessScaleGenerator.Shared"
    x:Name="Root"
    NavigationPage.HasNavigationBar="False"
    Loaded="Root_Loaded"
    Unloaded="Root_Unloaded">

    <Grid
        Grid.Row="1"
        ColumnDefinitions="*,2*"
        ColumnSpacing="6">

        <!--  Left  -->
        <Grid RowDefinitions="Auto,Auto,*" RowSpacing="5">

            <Label
                FontAttributes="Bold"
                FontSize="35"
                Text="Visão geral"
                TextColor="{DynamicResource PrimaryText}" />

            <!--  Container 1  -->
            <Grid
                Grid.Row="1"
                ColumnDefinitions="*,*"
                ColumnSpacing="5"
                RowDefinitions="*,*"
                RowSpacing="5">

                <elements:TableInfoBlock
                    BarColor="{DynamicResource Normal}"
                    Count="{Binding ProcessesCount}"
                    Description="Criados"
                    TitleText="Total processos"
                    Unicode="{StaticResource FAS_Clipboard}" />

                <elements:TableInfoBlock
                    Grid.Column="1"
                    BarColor="{DynamicResource Normal}"
                    Count="{Binding EmployeesCount}"
                    Description="Registrados"
                    TitleText="Total colaboradores"
                    Unicode="{StaticResource FAS_Users}" />

                <elements:TableInfoBlock
                    Grid.Row="1"
                    BarColor="{DynamicResource Error}"
                    Count="{Binding HiddenProcessesCount}"
                    Description="Ocultos"
                    TitleText="Total processos"
                    Unicode="{StaticResource FAS_EyeSlash}" />
                <elements:TableInfoBlock
                    Grid.Row="1"
                    Grid.Column="1"
                    BarColor="{DynamicResource Error}"
                    Count="{Binding HiddenEmployeesCount}"
                    Description="Ocultos"
                    TitleText="Total colaboradores"
                    Unicode="{StaticResource FAS_EyeSlash}" />

            </Grid>

            <!--  Container 3  -->
            <Border
                Grid.Row="2"
                BackgroundColor="{DynamicResource Primary}"
                Style="{DynamicResource Border.Radius14}">

                <Grid RowDefinitions="Auto,*">

                    <CollectionView
                        Grid.Row="1"
                        HorizontalOptions="Fill"
                        ItemTemplate="{DynamicResource TablePreviewData}"
                        ItemsSource="{Binding Tables}"
                        SelectionMode="None"
                        VerticalOptions="Fill"
                        VerticalScrollBarVisibility="Never">

                        <CollectionView.ItemsLayout>
                            <GridItemsLayout
                                Orientation="Vertical"
                                Span="1"
                                VerticalItemSpacing="2.5" />
                        </CollectionView.ItemsLayout>

                    </CollectionView>

                </Grid>


            </Border>

        </Grid>

        <!--  Right  -->
        <Border
            Grid.Column="1"
            BackgroundColor="{DynamicResource Primary}"
            Stroke="{DynamicResource ToyotaBlue}"
            Style="{DynamicResource Border.Radius14}">

            <Grid RowDefinitions="Auto,Auto,*" RowSpacing="5">

                <Label
                    FontAttributes="Bold"
                    FontSize="35"
                    HorizontalTextAlignment="Center"
                    Text="Pré-Visualização da tabela" />

                <buttons:IconButton
                    Grid.Row="1"
                    Command="{Binding CreateTableCommand}"
                    HorizontalOptions="Start"
                    Style="{StaticResource RefreshButton}"
                    Text="Gerar nova tabela" />

                <buttons:IconButton
                    Grid.Row="1"
                    Command="{Binding SaveTableCommand}"
                    HorizontalOptions="End"
                    Style="{StaticResource SaveButton}"
                    Text="Salvar atual" />

                <Border
                    Grid.Row="2"
                    BackgroundColor="{DynamicResource Tertiary}"
                    StrokeThickness="0"
                    Style="{DynamicResource Border.Radius8}">

                    <ScrollView>

                        <VerticalStackLayout x:Name="MainContainer" />

                    </ScrollView>

                </Border>

            </Grid>

        </Border>

    </Grid>

</ContentView>