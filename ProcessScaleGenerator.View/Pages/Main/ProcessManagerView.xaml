<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="ProcessScaleGenerator.View.Pages.Main.ProcessManagerView"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:buttons="clr-namespace:ProcessScaleGenerator.View.Components.Buttons"
    xmlns:elements="clr-namespace:ProcessScaleGenerator.View.Components.Elements"
    x:Name="Root"
    NavigationPage.HasNavigationBar="False">

    <Grid ColumnDefinitions="2*,*" ColumnSpacing="5">

        <!--  forms  -->
        <VerticalStackLayout>

            <Label
                FontAttributes="Bold"
                FontSize="35"
                Text="Criar novo processo"
                TextColor="{DynamicResource PrimaryText}" />

            <Grid
                ColumnDefinitions="1.5*,*"
                ColumnSpacing="5"
                RowDefinitions="*,Auto"
                RowSpacing="5">

                <VerticalStackLayout>

                    <elements:Textbar
                        TextContent="{Binding Title, Mode=TwoWay}"
                        TextTitle="Nome do processo"
                        Unicode="{DynamicResource PPO_Clipboard}"
                        UnicodeColor="{DynamicResource PrimaryText}"
                        UnicodeFamily="PPO" />

                    <elements:EditorBar
                        HeightEditor="300"
                        TextContent="{Binding Description, Mode=TwoWay}"
                        TextTitle="Descrição do processo"
                        Unicode="{DynamicResource PPO_File}"
                        UnicodeColor="{DynamicResource PrimaryText}"
                        UnicodeFamily="PPO" />

                </VerticalStackLayout>

                <Border
                    Grid.Column="1"
                    BackgroundColor="{DynamicResource Primary}"
                    Style="{StaticResource Border.Radius8}">

                    <Grid RowDefinitions="Auto,*,Auto">

                        <Label
                            FontSize="20"
                            HorizontalTextAlignment="Center"
                            Text="Icone do processo" />

                        <elements:CircularIcon
                            Grid.Row="1"
                            AbsoluteLayout.LayoutBounds="1,1,1,1"
                            AbsoluteLayout.LayoutFlags="All"
                            ColorCode="{Binding Icon.ColorCode}"
                            IconSize="200"
                            Unicode="{Binding Icon.Unicode}" />


                        <buttons:IconButton
                            Grid.Row="2"
                            Command="{Binding UpdateIconCommand}"
                            Style="{StaticResource EditButton}"
                            Text="Selecionar icone" />

                    </Grid>

                </Border>

            </Grid>

            <buttons:IconButton
                Padding="5"
                Command="{Binding CreateNewProcessCommand}"
                IsVisible="{Binding IsInCreateMode}"
                Style="{StaticResource CreateButton}"
                Text="Criar" />

            <Grid
                ColumnDefinitions="*,*"
                ColumnSpacing="5"
                IsVisible="{Binding IsInEditMode}">

                <buttons:IconButton
                    Command="{Binding CancelUpdateProcessCommand}"
                    Style="{StaticResource CancelButton}"
                    Text="Cancelar alterações" />

                <buttons:IconButton
                    Grid.Column="1"
                    Command="{Binding SaveUpdateProcessCommand}"
                    Style="{StaticResource SaveButton}"
                    Text="Salvar alterações" />

            </Grid>

        </VerticalStackLayout>

        <!--  List  -->
        <Border
            Grid.Column="1"
            Padding="5,5,5,0"
            BackgroundColor="{DynamicResource Primary}"
            Style="{DynamicResource Border.Radius14}">

            <Grid RowDefinitions="Auto,*" RowSpacing="5">

                <buttons:SearchBar SearchText="{Binding SearchProcessText, Mode=TwoWay}" />

                <CollectionView
                    Grid.Row="1"
                    HorizontalOptions="Fill"
                    ItemTemplate="{DynamicResource ToastViewData}"
                    ItemsSource="{Binding FiltredProcessList}"
                    SelectionMode="None"
                    VerticalOptions="Fill"
                    VerticalScrollBarVisibility="Never">

                    <CollectionView.ItemsLayout>
                        <GridItemsLayout
                            Orientation="Vertical"
                            Span="1"
                            VerticalItemSpacing="2.5" />
                    </CollectionView.ItemsLayout>

                </CollectionView>

            </Grid>

        </Border>

    </Grid>

</ContentView>